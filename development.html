

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Development &mdash; pgpointcloud</title>
  

  
  
    <link rel="shortcut icon" href="_static/favicon.ico"/>
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="genindex.html"/>
        <link rel="search" title="Search" href="search.html"/>
        <link rel="copyright" title="Copyright" href="copyright.html"/>
    <link rel="top" title="pgpointcloud" href="index.html"/>
        <link rel="next" title="Community" href="community.html"/>
        <link rel="prev" title="PostGIS" href="functions/postgis.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> pgPointcloud
          

          
          </a>

          
            
            
              <div class="version">
                1.2.1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="concepts/index.html">Concepts</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="download.html">Download</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="quickstart.html">Getting Started</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="functions/index.html">Functions</a></li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Development</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#requirements">Requirements</a></li>
<li class="toctree-l2"><a class="reference internal" href="#build-install">Build/Install</a></li>
<li class="toctree-l2"><a class="reference internal" href="#tests">Tests</a></li>
<li class="toctree-l2"><a class="reference internal" href="#write-a-loading-system">Write a loading system</a></li>
<li class="toctree-l2"><a class="reference internal" href="#documentation">Documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="#docker-image">Docker Image</a></li>
<li class="toctree-l2"><a class="reference internal" href="#continuous-integration">Continuous Integration</a></li>
<li class="toctree-l2"><a class="reference internal" href="#release">Release</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="community.html">Community</a></li>
<li class="toctree-l1"><a class="reference internal" href="faq.html">FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="copyright.html">License</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">pgPointcloud</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Development</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="development">
<span id="development-index"></span><h1>Development<a class="headerlink" href="#development" title="Permalink to this headline">¶</a></h1>
<p>Developer documentation with dependancies, build instructions, how to build a
Docker image, update the documentation and run unit tests.</p>
<div class="section" id="requirements">
<h2>Requirements<a class="headerlink" href="#requirements" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>PostgreSQL and PostgreSQL development packages must be installed (pg_config
and server headers). For Red Hat and Ubuntu, the package names are usually
<code class="docutils literal"><span class="pre">postgresql-dev</span></code> or <code class="docutils literal"><span class="pre">postgresql-devel</span></code></li>
<li>LibXML2 development packages must be installed, usually <code class="docutils literal"><span class="pre">libxml2-dev</span></code> or
<code class="docutils literal"><span class="pre">libxml2-devel</span></code></li>
<li>CUnit packages must be installed</li>
<li>[Optional] <code class="docutils literal"><span class="pre">laz-perf</span></code> library may be installed for LAZ compression support
(built from <a class="reference external" href="https://github.com/hobu/laz-perf">source</a>)</li>
</ul>
</div>
<div class="section" id="build-install">
<h2>Build/Install<a class="headerlink" href="#build-install" title="Permalink to this headline">¶</a></h2>
<p>After generating the configure script with <code class="docutils literal"><span class="pre">autogen.sh</span></code>, you can use
<code class="docutils literal"><span class="pre">./configure</span> <span class="pre">--help</span></code> to get a complete listing of configuration options.</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ ./autogen.sh
$ ./configure
$ make
$ sudo make install
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>You can use <code class="docutils literal"><span class="pre">--with-pgconfig</span></code> on the <code class="docutils literal"><span class="pre">./configure</span></code> command line if
you have multiple PostgreSQL installations on your system and want to target a
specific one. For example:</p>
<div class="last highlight-bash"><div class="highlight"><pre><span></span>$ ./configure --with-pgconfig<span class="o">=</span>/usr/lib/postgresql/12/bin/pg_config
</pre></div>
</div>
</div>
</div>
<div class="section" id="tests">
<h2>Tests<a class="headerlink" href="#tests" title="Permalink to this headline">¶</a></h2>
<p><strong>Unit tests</strong></p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ make check
</pre></div>
</div>
<p><strong>Regressions tests</strong></p>
<p>pgPointcloud includes SQL tests to run against an existing installation. To run
the SQL tests:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ sudo make install
$ <span class="nv">PGUSER</span><span class="o">=</span>a_user <span class="nv">PGPASSWORD</span><span class="o">=</span>a_password <span class="nv">PGHOST</span><span class="o">=</span>localhost make installcheck
</pre></div>
</div>
<p>This command will create a database named <code class="docutils literal"><span class="pre">contrib_regression</span></code> and will execute
the SQL scripts located in <code class="docutils literal"><span class="pre">pgsql/sql</span></code> in this database.</p>
</div>
<div class="section" id="write-a-loading-system">
<h2>Write a loading system<a class="headerlink" href="#write-a-loading-system" title="Permalink to this headline">¶</a></h2>
<p>If you are writing your own loading system and want to write into Pointcloud
types, create well-known binary inputs, in uncompressed format. If your schema
indicates that your patch storage is compressed, Pointcloud will automatically
compress your patch before storing it, so you can create patches in
uncompressed WKB without worrying about the nuances of particular internal
compression schemes.</p>
<p>The only issues to watch when creating WKB patches are: ensuring the data you
write is sized according to the schema (use the specified dimension type);
ensuring that the endianness of the data matches the declared endianness of the
patch.</p>
</div>
<div class="section" id="documentation">
<h2>Documentation<a class="headerlink" href="#documentation" title="Permalink to this headline">¶</a></h2>
<p>Sphinx is used to build the documentation. For that, you have to install the
next Python packages:</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">sphinx</span></code></li>
<li><code class="docutils literal"><span class="pre">sphinxcontrib.bibtex</span></code></li>
</ul>
<p>Then:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ <span class="nb">cd</span> doc <span class="o">&amp;&amp;</span> make html
</pre></div>
</div>
<p>The HTML documentation is available in <code class="docutils literal"><span class="pre">doc/build/html</span></code>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The documentation can be generated in another format like pdf, epub, …
You can use <code class="docutils literal"><span class="pre">make</span></code> to get a list of all available formats.</p>
</div>
</div>
<div class="section" id="docker-image">
<h2>Docker Image<a class="headerlink" href="#docker-image" title="Permalink to this headline">¶</a></h2>
<p>A <code class="docutils literal"><span class="pre">Dockerfile</span></code> is provided in the <code class="docutils literal"><span class="pre">docker</span></code> directory and based on the
official PostgreSQL docker image available <a class="reference external" href="https://hub.docker.com/_/postgres">DockerHub</a>. The image generated
is based on PostgreSQL 12, PostGIS 3 and the laz-perf support is activated.</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ docker build --rm -t pgpointcloud docker/
</pre></div>
</div>
</div>
<div class="section" id="continuous-integration">
<h2>Continuous Integration<a class="headerlink" href="#continuous-integration" title="Permalink to this headline">¶</a></h2>
<p>pgPointcloud tests are run with <a class="reference external" href="https://github.com/pgpointcloud/pointcloud/actions">Github Actions</a> on several Ubuntu versions
and with various PostgreSQL/PostGIS releases:</p>
<table border="1" class="docutils">
<colgroup>
<col width="31%" />
<col width="33%" />
<col width="35%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>&#160;</td>
<td>PostGIS 2.5</td>
<td>PostGIS 3</td>
</tr>
<tr class="row-even"><td>PostgreSQL 9.6</td>
<td><a class="reference external" href="https://github.com/pgpointcloud/pointcloud/actions?query=workflow%3A%22%5Bubuntu-16.04%5D+PostgreSQL+9.6+and+PostGIS+2.5%22"><img alt="96_25" src="https://img.shields.io/github/workflow/status/pgpointcloud/pointcloud/%5Bubuntu-16.04%5D%20PostgreSQL%209.6%20and%20PostGIS%202.5?label=Ubuntu%2016.04&amp;logo=github&amp;style=plastic" /></a></td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>PostgreSQL 10</td>
<td><img alt="10_25" src="https://img.shields.io/github/workflow/status/pgpointcloud/pointcloud/%5Bubuntu-16.04%5D%20PostgreSQL%2010%20and%20PostGIS%202.5?label=Ubuntu%2016.04&amp;logo=github&amp;style=plastic:target:https://github.com/pgpointcloud/pointcloud/actions?query=workflow%3A%22%5Bubuntu-16.04%5D+PostgreSQL+10+and+PostGIS+2.5%22" /></td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td>PostgreSQL 11</td>
<td><img alt="11_25" src="https://img.shields.io/github/workflow/status/pgpointcloud/pointcloud/%5Bubuntu-16.04%5D%20PostgreSQL%2011%20and%20PostGIS%202.5?label=Ubuntu%2016.04&amp;logo=github&amp;style=plastic:target:https://github.com/pgpointcloud/pointcloud/actions?query=workflow%3A%22%5Bubuntu-16.04%5D+PostgreSQL+11+and+PostGIS+2.5%22" /></td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>PostgreSQL 12</td>
<td><img alt="12_25" src="https://img.shields.io/github/workflow/status/pgpointcloud/pointcloud/%5Bubuntu-18.04%5D%20PostgreSQL%2012%20and%20PostGIS%202.5?label=Ubuntu%2018.04&amp;logo=github&amp;style=plastic:target:https://github.com/pgpointcloud/pointcloud/actions?query=workflow%3A%22%5Bubuntu-18.04%5D+PostgreSQL+12+and+PostGIS+2.5%22" /></td>
<td><img alt="12_3" src="https://img.shields.io/github/workflow/status/pgpointcloud/pointcloud/%5Bubuntu-18.04%5D%20PostgreSQL%2012%20and%20PostGIS%203?label=Ubuntu%2018.04&amp;logo=github&amp;style=plastic:target:https://github.com/pgpointcloud/pointcloud/actions?query=workflow%3A%22%5Bubuntu-18.04%5D+PostgreSQL+12+and+PostGIS+3%22" /></td>
</tr>
</tbody>
</table>
<blockquote>
<div></div></blockquote>
</div>
<div class="section" id="release">
<h2>Release<a class="headerlink" href="#release" title="Permalink to this headline">¶</a></h2>
<p>Steps for releasing a new version of Pointcloud:</p>
<ol class="arabic simple">
<li>Add a new section to the <code class="docutils literal"><span class="pre">NEWS</span></code> file, listing all the changes associated
with the new release.</li>
<li>Change the version number in the <code class="docutils literal"><span class="pre">Version.config</span></code> and
<code class="docutils literal"><span class="pre">pgsql/expected/pointcloud.out</span></code> files.</li>
<li>Update the value of <code class="docutils literal"><span class="pre">UPGRADABLE</span></code> in <code class="docutils literal"><span class="pre">pgsql/Makefile.in</span></code>. This variable
defines the versions from which a database can be upgraded to the new
Pointcloud version.</li>
<li>Create a PR&nbsp;with these changes.</li>
<li>When the PR is merged create a tag for the new release and push it to
GitHub:</li>
</ol>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ git tag -a vx.y.z -m <span class="s1">&#39;version x.y.z&#39;</span>
$ git push origin vx.y.z
</pre></div>
</div>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="community.html" class="btn btn-neutral float-right" title="Community" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="functions/postgis.html" class="btn btn-neutral" title="PostGIS" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>

    </p>
  </div>
    <div class="footer">
        <div class="container">
            &copy;  2020
            <a href="https://github.com/pramsey">Paul Ramsey</a>,
            <a href="http://github.com/pblottiere">Paul Blottiere</a>,
            <a href="http://github.com/mbredif">Mathieu Brédif</a>,
            <a href="http://github.com/elemoine">Eric Lemoine</a>,
            and
            <a href="https://github.com/pgpointcloud/pointcloud/graphs/contributors">others</a>,
        </div>
    </div>
     


</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'1.2.1',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>